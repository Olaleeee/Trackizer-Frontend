"use strict";(self.webpackChunktrackizer=self.webpackChunktrackizer||[]).push([[535],{535:(e,t,s)=>{s.r(t),s.d(t,{controlAuthClick:()=>b,controlDataSubmit:()=>m,controlFormFocusOut:()=>f,controlFormInput:()=>p,controlFormSubmit:()=>d}),s(509);var o=s(874),r=s(106),a=s(712),c=s(682),n=s(691),i=s(911);const l=new(s(549).zT)({duration:3e3,position:{x:"center",y:"top"}}),u=async function(e){return new Promise((t,s)=>{setTimeout(()=>{t()},1e3*e)})},d=function(e){console.log(e),e.closest(".signup-form")&&async function(e){try{const t=await o.A.submitForm(e);o.A.renderSpinner(),await r.$5(t),o.A.closeSpinner(),l.success("account created successfully"),await u(2),location.replace("/dashboard")}catch(e){o.A.closeSpinner(),console.log(e),l.error(e.message)}}(e),e.closest(".signin-form")&&async function(e){try{const t=await o.A.submitForm(e);o.A.renderSpinner(),await r.Pm(t),o.A.closeSpinner(),l.success("logged in successfully"),await u(2),location.replace("/dashboard")}catch(e){o.A.closeSpinner(),l.error(e.message)}}(e),e.closest(".password-forgot-form")&&async function(e){try{const t=await o.A.submitForm(e);o.A.renderSpinner(),await r.BD(t),l.success("reset code sent"),await u(2),localStorage.setItem("email",t.email),location.replace("/auth/confirm-password")}catch(e){o.A.closeSpinner(),l.error(e.message)}}(e),e.closest(".password-confirm-form")&&async function(e){try{const t=await o.A.submitForm(e);o.A.renderSpinner(),await r.hZ(t.number),l.success("code confirmed successfully"),await u(2),location.replace("/auth/reset-password")}catch(e){o.A.closeSpinner(),l.error(e.message)}}(e),e.closest(".password-reset-form")&&async function(e){try{const t=await o.A.submitForm(e);o.A.renderSpinner(),await r.xw(t),o.A.closeSpinner(),l.success("password changed successully"),await u(2),localStorage.removeItem("email"),location.replace("/auth/signin")}catch(e){l.error(e.message),o.A.closeSpinner()}}(e),e.closest(".sub-form")&&async function(e){try{const t=await o.A.submitForm(e);o.A.renderSpinner(),await r.P1(t),o.A.closeSpinner(),n.A.hideDialogue(),l.success("subscription created"),await u(2),c.default.renderNewSub(r.state.subscriptions.newSub);const{updateDashboard:a}=await Promise.resolve().then(s.bind(s,190));a()}catch(e){console.log(e),o.A.closeSpinner(),l.error(e.message)}}(e),e.closest(".cat-form")&&async function(e){try{const t=await o.A.submitForm(e);console.log(t),o.A.renderSpinner(),await r.Nj(t),o.A.closeSpinner(),l.success("category created"),await u(2),n.A.hideDialogue(),i.A.renderNewCategory(r.state.subscriptions.category)}catch(e){console.log(e),o.A.closeSpinner(),l.error(e.message)}}(e)},m=function(e){if(e.closest(".category-dropdown")){const t=e.closest(".sub-item").dataset?.id,s=e.dataset?.id;!async function(e,t){try{console.log(e,t),await r.Uc([e,t]),l.success("added"),await u(2)}catch(e){console.log(e),l.error(e.message)}}(s,t)}},p=function(e){e.closest(".password")&&o.A.validateInputPassword(e),e.closest(".number")&&o.A.validateInputCode(e)},f=function(e){o.A.validateInputEmail(e)},b=function(e){e.closest(".btn-signout")&&async function(){r.state.isInitSignout=!0,a.default.renderConfirm("Are you sure you want to logout?","signout")}(),e.closest(".signout")&&async function(){try{await r.S6(),l.success("logged out"),await u(2),location.replace("/auth/signin")}catch(e){l.error(e.message),location.reload}}()}},874:(e,t,s)=>{s.d(t,{A:()=>a});var o=s(341);class r extends o.A{async submitForm(e){if(console.log("here",this.formEl),e.closest(".form")||e.closest(".settings-form"))return Object.fromEntries([...new FormData(this.formEl)])}validateInputPassword(e){if(!e.closest(".password"))return;const t=e,s=t.closest(".form"),o=s.querySelector(".validation-msg");e.stylborderColor="var(--color-grey-6)",o.textContent="",t.value.trim(),t.checkValidity()||(t.stylborderColor="var(--color-red)",s.closest(".password-forgot-form")||t.closest("signup-form")?o.textContent="password must be at least 8 characters":o.textContent="Password required"),this._activateSubmitBtn(t)}validateInputCode(e){e.closest(".number")&&this._activateSubmitBtn(e)}validateInputEmail(e){if(!e.closest("#email"))return;const t=e,s=t.closest(".form").querySelector(".validation-msg");t.stylborderColor="var(--color-grey-6)",s.textContent="",t.checkValidity()||(t.stylborderColor="var(--color-red)",s.textContent="Please provide a valid email"),this._activateSubmitBtn(t)}_activateSubmitBtn(e){const t=e.closest(".form"),s=e?.closest(".form").querySelector(".btn-submit"),[o,r]=e.closest(".form").querySelectorAll(".password");return t.classList.contains("signup-form")?o.checkValidity()&&r.checkValidity()&&e.checkValidity()?s?.classList.remove("disable-btn"):s?.classList.add("disable-btn"):t.classList.contains("signin-form")?o.checkValidity()&&e.checkValidity()?s?.classList.remove("disable-btn"):s?.classList.add("disable-btn"):t.closest(".password-forgot-form")?e.checkValidity()?s?.classList.remove("disable-btn"):s?.classList.add("disable-btn"):(t.closest(".password-confirm-form")&&(e.value=e.value.slice(0,6),e.value.length<=6&&s?.classList.add("disable-btn"),e.value.length>=6&&s?.classList.remove("disable-btn")),void(t.closest(".password-reset-form")&&(o.checkValidity()&&r.checkValidity()&&s?.classList.remove("disable-btn"),o.checkValidity()&&r.checkValidity()||s?.classList.add("disable-btn"))))}get formEl(){return this.app.querySelector(".form")||this.app.querySelector(".settings-form")}get loaderParent(){return this.formEl.querySelector(".btn-submit")}}const a=new r}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFja2l6ZXIvLi9wdWJsaWMvc2NyaXB0L2NvbnRyb2xsZXJzL2Zvcm1Db250cm9sbGVyLmpzIiwid2VicGFjazovL3RyYWNraXplci8uL3B1YmxpYy9zY3JpcHQvdmlld3MvcGFnZXMvZm9ybVZpZXcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGVycm9yVmlldyBmcm9tICcuLi92aWV3cy9kaWFsb2d1ZXMvZXJyb3JWaWV3JztcclxuaW1wb3J0IGF1dGhWaWV3IGZyb20gJy4uL3ZpZXdzL3BhZ2VzL2Zvcm1WaWV3JztcclxuaW1wb3J0ICogYXMgbW9kZWwgZnJvbSAnLi4vbW9kZWwnO1xyXG5pbXBvcnQgYXBwVmlldyBmcm9tICcuLi92aWV3cy9hcHBWaWV3JztcclxuaW1wb3J0IGRhc2hib2FyZFZpZXcgZnJvbSAnLi4vdmlld3Mvc2VjdGlvbnMvZGFzaGJvYXJkVmlldyc7XHJcbmltcG9ydCBhcHBEaWFsb2d1ZVZpZXcgZnJvbSAnLi4vdmlld3MvZGlhbG9ndWVzL2FwcERpYWxvZ3VlVmlldyc7XHJcbmltcG9ydCB7IHN0YXRlIH0gZnJvbSAnLi4vbW9kZWwnO1xyXG5pbXBvcnQgYnVkZ2V0VmlldyBmcm9tICcuLi92aWV3cy9zZWN0aW9ucy9idWRnZXRWaWV3JztcclxuXHJcbmltcG9ydCB7IE5vdHlmIH0gZnJvbSAnbm90eWYnO1xyXG5pbXBvcnQgJ25vdHlmL25vdHlmLm1pbi5jc3MnO1xyXG5cclxuY29uc3Qgbm90eWYgPSBuZXcgTm90eWYoe1xyXG4gIGR1cmF0aW9uOiAzMDAwLFxyXG4gIHBvc2l0aW9uOiB7IHg6ICdjZW50ZXInLCB5OiAndG9wJyB9LFxyXG59KTtcclxuY29uc3QgcGF1c2UgPSBhc3luYyBmdW5jdGlvbiAodGltZW91dCkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCBfKSA9PiB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgcmVzKCk7XHJcbiAgICB9LCB0aW1lb3V0ICogMTAwMCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBzaWdudXAgPSBhc3luYyBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgYXV0aFZpZXcuc3VibWl0Rm9ybSh0YXJnZXQpO1xyXG4gICAgYXV0aFZpZXcucmVuZGVyU3Bpbm5lcigpO1xyXG5cclxuICAgIGF3YWl0IG1vZGVsLnNpZ251cChmb3JtRGF0YSk7XHJcbiAgICBhdXRoVmlldy5jbG9zZVNwaW5uZXIoKTtcclxuXHJcbiAgICBub3R5Zi5zdWNjZXNzKCdhY2NvdW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICBhd2FpdCBwYXVzZSgyKTtcclxuXHJcbiAgICBsb2NhdGlvbi5yZXBsYWNlKCcvZGFzaGJvYXJkJyk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBhdXRoVmlldy5jbG9zZVNwaW5uZXIoKTtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICBub3R5Zi5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3Qgc2lnbmluID0gYXN5bmMgZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IGF1dGhWaWV3LnN1Ym1pdEZvcm0odGFyZ2V0KTtcclxuICAgIGF1dGhWaWV3LnJlbmRlclNwaW5uZXIoKTtcclxuXHJcbiAgICBhd2FpdCBtb2RlbC5zaWduaW4oZm9ybURhdGEpO1xyXG4gICAgYXV0aFZpZXcuY2xvc2VTcGlubmVyKCk7XHJcblxyXG4gICAgbm90eWYuc3VjY2VzcygnbG9nZ2VkIGluIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgYXdhaXQgcGF1c2UoMik7XHJcblxyXG4gICAgbG9jYXRpb24ucmVwbGFjZSgnL2Rhc2hib2FyZCcpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgYXV0aFZpZXcuY2xvc2VTcGlubmVyKCk7XHJcbiAgICBub3R5Zi5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgY29uZmlybVNpZ25vdXQgPSBhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgbW9kZWwuc3RhdGUuaXNJbml0U2lnbm91dCA9IHRydWU7XHJcbiAgYXBwVmlldy5yZW5kZXJDb25maXJtKFxyXG4gICAgJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBsb2dvdXQ/JyxcclxuICAgICdzaWdub3V0J1xyXG4gICk7XHJcbn07XHJcblxyXG5jb25zdCBzaWdub3V0ID0gYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBtb2RlbC5zaWdub3V0KCk7XHJcblxyXG4gICAgbm90eWYuc3VjY2VzcygnbG9nZ2VkIG91dCcpO1xyXG4gICAgYXdhaXQgcGF1c2UoMik7XHJcbiAgICBsb2NhdGlvbi5yZXBsYWNlKCcvYXV0aC9zaWduaW4nKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIG5vdHlmLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIGxvY2F0aW9uLnJlbG9hZDtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBmb3Jnb3RQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCBhdXRoVmlldy5zdWJtaXRGb3JtKHRhcmdldCk7XHJcbiAgICBhdXRoVmlldy5yZW5kZXJTcGlubmVyKCk7XHJcbiAgICBhd2FpdCBtb2RlbC5mb3Jnb3RQYXNzd29yZChmb3JtRGF0YSk7XHJcblxyXG4gICAgbm90eWYuc3VjY2VzcygncmVzZXQgY29kZSBzZW50Jyk7XHJcbiAgICBhd2FpdCBwYXVzZSgyKTtcclxuXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW1haWwnLCBmb3JtRGF0YS5lbWFpbCk7XHJcbiAgICBsb2NhdGlvbi5yZXBsYWNlKCcvYXV0aC9jb25maXJtLXBhc3N3b3JkJyk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBhdXRoVmlldy5jbG9zZVNwaW5uZXIoKTtcclxuICAgIG5vdHlmLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBjb25maXJtQ29kZSA9IGFzeW5jIGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCBhdXRoVmlldy5zdWJtaXRGb3JtKHRhcmdldCk7XHJcblxyXG4gICAgYXV0aFZpZXcucmVuZGVyU3Bpbm5lcigpO1xyXG5cclxuICAgIGF3YWl0IG1vZGVsLmNvbmZpcm1SZXNldENvZGUoZm9ybURhdGEubnVtYmVyKTtcclxuXHJcbiAgICBub3R5Zi5zdWNjZXNzKCdjb2RlIGNvbmZpcm1lZCBzdWNjZXNzZnVsbHknKTtcclxuICAgIGF3YWl0IHBhdXNlKDIpO1xyXG5cclxuICAgIGxvY2F0aW9uLnJlcGxhY2UoJy9hdXRoL3Jlc2V0LXBhc3N3b3JkJyk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBhdXRoVmlldy5jbG9zZVNwaW5uZXIoKTtcclxuICAgIC8vIG5vdHlmLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIG5vdHlmLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIC8vIGF3YWl0IHBhdXNlKDIpXHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcmVzZXRQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCBhdXRoVmlldy5zdWJtaXRGb3JtKHRhcmdldCk7XHJcbiAgICBhdXRoVmlldy5yZW5kZXJTcGlubmVyKCk7XHJcblxyXG4gICAgYXdhaXQgbW9kZWwucmVzZXRQYXNzd29yZChmb3JtRGF0YSk7XHJcbiAgICBhdXRoVmlldy5jbG9zZVNwaW5uZXIoKTtcclxuXHJcbiAgICBub3R5Zi5zdWNjZXNzKCdwYXNzd29yZCBjaGFuZ2VkIHN1Y2Nlc3N1bGx5Jyk7XHJcbiAgICBhd2FpdCBwYXVzZSgyKTtcclxuXHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZW1haWwnKTtcclxuXHJcbiAgICBsb2NhdGlvbi5yZXBsYWNlKCcvYXV0aC9zaWduaW4nKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIG5vdHlmLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIGF1dGhWaWV3LmNsb3NlU3Bpbm5lcigpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vTkVXIFNVQlNDUklQVElPTlxyXG5jb25zdCBjcmVhdGVOZXdTdWIgPSBhc3luYyBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgYXV0aFZpZXcuc3VibWl0Rm9ybSh0YXJnZXQpO1xyXG4gICAgYXV0aFZpZXcucmVuZGVyU3Bpbm5lcigpO1xyXG5cclxuICAgIGF3YWl0IG1vZGVsLmNyZWF0ZVN1Yihmb3JtRGF0YSk7XHJcbiAgICBhdXRoVmlldy5jbG9zZVNwaW5uZXIoKTtcclxuXHJcbiAgICBhcHBEaWFsb2d1ZVZpZXcuaGlkZURpYWxvZ3VlKCk7XHJcblxyXG4gICAgbm90eWYuc3VjY2Vzcygnc3Vic2NyaXB0aW9uIGNyZWF0ZWQnKTtcclxuICAgIGF3YWl0IHBhdXNlKDIpO1xyXG5cclxuICAgIGRhc2hib2FyZFZpZXcucmVuZGVyTmV3U3ViKHN0YXRlLnN1YnNjcmlwdGlvbnMubmV3U3ViKTtcclxuICAgIGNvbnN0IHsgdXBkYXRlRGFzaGJvYXJkIH0gPSBhd2FpdCBpbXBvcnQoJy4uL2hlbHBlcnMnKTtcclxuICAgIHVwZGF0ZURhc2hib2FyZCgpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIGF1dGhWaWV3LmNsb3NlU3Bpbm5lcigpO1xyXG4gICAgbm90eWYuZXJyb3IoZXJyLm1lc3NhZ2UpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vTkVXIENBVEVHT1JZXHJcbmNvbnN0IGNyZWF0ZU5ld0NhdCA9IGFzeW5jIGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCBhdXRoVmlldy5zdWJtaXRGb3JtKHRhcmdldCk7XHJcbiAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSk7XHJcbiAgICBhdXRoVmlldy5yZW5kZXJTcGlubmVyKCk7XHJcblxyXG4gICAgYXdhaXQgbW9kZWwuY3JlYXRlQ2F0KGZvcm1EYXRhKTtcclxuICAgIGF1dGhWaWV3LmNsb3NlU3Bpbm5lcigpO1xyXG5cclxuICAgIG5vdHlmLnN1Y2Nlc3MoJ2NhdGVnb3J5IGNyZWF0ZWQnKTtcclxuICAgIGF3YWl0IHBhdXNlKDIpO1xyXG5cclxuICAgIGFwcERpYWxvZ3VlVmlldy5oaWRlRGlhbG9ndWUoKTtcclxuICAgIGJ1ZGdldFZpZXcucmVuZGVyTmV3Q2F0ZWdvcnkoc3RhdGUuc3Vic2NyaXB0aW9ucy5jYXRlZ29yeSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgYXV0aFZpZXcuY2xvc2VTcGlubmVyKCk7XHJcbiAgICBub3R5Zi5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQUREIFNVQlNDUklQVElPTlQgVE8gQ0FURUdPUllcclxuY29uc3QgYWRkU3ViVG9DYXRlZ29yeSA9IGFzeW5jIGZ1bmN0aW9uIChjYXRlZ29yeUlkLCBzdWJJZCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZyhjYXRlZ29yeUlkLCBzdWJJZCk7XHJcbiAgICBhd2FpdCBtb2RlbC5hZGRTdWJDYXRlZ29yeShbY2F0ZWdvcnlJZCwgc3ViSWRdKTtcclxuXHJcbiAgICBub3R5Zi5zdWNjZXNzKCdhZGRlZCcpO1xyXG4gICAgYXdhaXQgcGF1c2UoMik7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgbm90eWYuZXJyb3IoZXJyLm1lc3NhZ2UpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb250cm9sRm9ybVN1Ym1pdCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICBjb25zb2xlLmxvZyh0YXJnZXQpO1xyXG5cclxuICAvL3N1Ym1pdCBldmVudHNcclxuICB0YXJnZXQuY2xvc2VzdCgnLnNpZ251cC1mb3JtJykgJiYgc2lnbnVwKHRhcmdldCk7XHJcbiAgdGFyZ2V0LmNsb3Nlc3QoJy5zaWduaW4tZm9ybScpICYmIHNpZ25pbih0YXJnZXQpO1xyXG4gIHRhcmdldC5jbG9zZXN0KCcucGFzc3dvcmQtZm9yZ290LWZvcm0nKSAmJiBmb3Jnb3RQYXNzd29yZCh0YXJnZXQpO1xyXG4gIHRhcmdldC5jbG9zZXN0KCcucGFzc3dvcmQtY29uZmlybS1mb3JtJykgJiYgY29uZmlybUNvZGUodGFyZ2V0KTtcclxuICB0YXJnZXQuY2xvc2VzdCgnLnBhc3N3b3JkLXJlc2V0LWZvcm0nKSAmJiByZXNldFBhc3N3b3JkKHRhcmdldCk7XHJcbiAgdGFyZ2V0LmNsb3Nlc3QoJy5zdWItZm9ybScpICYmIGNyZWF0ZU5ld1N1Yih0YXJnZXQpO1xyXG4gIHRhcmdldC5jbG9zZXN0KCcuY2F0LWZvcm0nKSAmJiBjcmVhdGVOZXdDYXQodGFyZ2V0KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb250cm9sRGF0YVN1Ym1pdCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5jYXRlZ29yeS1kcm9wZG93bicpKSB7XHJcbiAgICBjb25zdCBzdWJJZCA9IHRhcmdldC5jbG9zZXN0KCcuc3ViLWl0ZW0nKS5kYXRhc2V0Py5pZDtcclxuICAgIGNvbnN0IGNhdGVnb3J5SWQgPSB0YXJnZXQuZGF0YXNldD8uaWQ7XHJcbiAgICBhZGRTdWJUb0NhdGVnb3J5KGNhdGVnb3J5SWQsIHN1YklkKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY29udHJvbEZvcm1JbnB1dCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICB0YXJnZXQuY2xvc2VzdCgnLnBhc3N3b3JkJykgJiZcclxuICAgIGF1dGhWaWV3LnZhbGlkYXRlSW5wdXRQYXNzd29yZCh0YXJnZXQpO1xyXG4gIHRhcmdldC5jbG9zZXN0KCcubnVtYmVyJykgJiYgYXV0aFZpZXcudmFsaWRhdGVJbnB1dENvZGUodGFyZ2V0KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb250cm9sRm9ybUZvY3VzT3V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gIGF1dGhWaWV3LnZhbGlkYXRlSW5wdXRFbWFpbCh0YXJnZXQpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbnRyb2xBdXRoQ2xpY2sgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYnRuLXNpZ25vdXQnKSkge1xyXG4gICAgY29uZmlybVNpZ25vdXQoKTtcclxuICB9XHJcbiAgaWYgKHRhcmdldC5jbG9zZXN0KCcuc2lnbm91dCcpKSB7XHJcbiAgICBzaWdub3V0KCk7XHJcbiAgfVxyXG59O1xyXG4iLCJpbXBvcnQgTWFpblZpZXcgZnJvbSAnLi4vVmlldyc7XHJcblxyXG5jbGFzcyBGb3JtVmlldyBleHRlbmRzIE1haW5WaWV3IHtcclxuICBhc3luYyBzdWJtaXRGb3JtKHRhcmdldCkge1xyXG4gICAgY29uc29sZS5sb2coJ2hlcmUnLCB0aGlzLmZvcm1FbCk7XHJcbiAgICBpZiAoIXRhcmdldC5jbG9zZXN0KCcuZm9ybScpICYmICF0YXJnZXQuY2xvc2VzdCgnLnNldHRpbmdzLWZvcm0nKSlcclxuICAgICAgcmV0dXJuO1xyXG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhbLi4ubmV3IEZvcm1EYXRhKHRoaXMuZm9ybUVsKV0pO1xyXG4gIH1cclxuXHJcbiAgdmFsaWRhdGVJbnB1dFBhc3N3b3JkKHRhcmdldCkge1xyXG4gICAgaWYgKCF0YXJnZXQuY2xvc2VzdCgnLnBhc3N3b3JkJykpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBpbnB1dEVsID0gdGFyZ2V0O1xyXG4gICAgY29uc3QgZm9ybUVsID0gaW5wdXRFbC5jbG9zZXN0KCcuZm9ybScpO1xyXG4gICAgY29uc3QgdmFsaWRhdGlvbk1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoJy52YWxpZGF0aW9uLW1zZycpO1xyXG5cclxuICAgIHRhcmdldC5zdHlsYm9yZGVyQ29sb3IgPSAndmFyKC0tY29sb3ItZ3JleS02KSc7XHJcbiAgICB2YWxpZGF0aW9uTXNnRWwudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBpbnB1dEVsLnZhbHVlLnRyaW0oKTtcclxuXHJcbiAgICBpZiAoIWlucHV0RWwuY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgIGlucHV0RWwuc3R5bGJvcmRlckNvbG9yID0gJ3ZhcigtLWNvbG9yLXJlZCknO1xyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIGZvcm1FbC5jbG9zZXN0KCcucGFzc3dvcmQtZm9yZ290LWZvcm0nKSB8fFxyXG4gICAgICAgIGlucHV0RWwuY2xvc2VzdCgnc2lnbnVwLWZvcm0nKVxyXG4gICAgICApXHJcbiAgICAgICAgdmFsaWRhdGlvbk1zZ0VsLnRleHRDb250ZW50ID1cclxuICAgICAgICAgICdwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycyc7XHJcbiAgICAgIGVsc2UgdmFsaWRhdGlvbk1zZ0VsLnRleHRDb250ZW50ID0gJ1Bhc3N3b3JkIHJlcXVpcmVkJztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9hY3RpdmF0ZVN1Ym1pdEJ0bihpbnB1dEVsKTtcclxuICB9XHJcblxyXG4gIHZhbGlkYXRlSW5wdXRDb2RlKHRhcmdldCkge1xyXG4gICAgaWYgKCF0YXJnZXQuY2xvc2VzdCgnLm51bWJlcicpKSByZXR1cm47XHJcbiAgICB0aGlzLl9hY3RpdmF0ZVN1Ym1pdEJ0bih0YXJnZXQpO1xyXG4gIH1cclxuXHJcbiAgdmFsaWRhdGVJbnB1dEVtYWlsKHRhcmdldCkge1xyXG4gICAgaWYgKCF0YXJnZXQuY2xvc2VzdCgnI2VtYWlsJykpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBpbnB1dEVsID0gdGFyZ2V0O1xyXG4gICAgY29uc3QgZm9ybUVsID0gaW5wdXRFbC5jbG9zZXN0KCcuZm9ybScpO1xyXG4gICAgY29uc3QgdmFsaWRhdGlvbk1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoJy52YWxpZGF0aW9uLW1zZycpO1xyXG5cclxuICAgIGlucHV0RWwuc3R5bGJvcmRlckNvbG9yID0gJ3ZhcigtLWNvbG9yLWdyZXktNiknO1xyXG4gICAgdmFsaWRhdGlvbk1zZ0VsLnRleHRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgaWYgKCFpbnB1dEVsLmNoZWNrVmFsaWRpdHkoKSkge1xyXG4gICAgICBpbnB1dEVsLnN0eWxib3JkZXJDb2xvciA9ICd2YXIoLS1jb2xvci1yZWQpJztcclxuICAgICAgdmFsaWRhdGlvbk1zZ0VsLnRleHRDb250ZW50ID0gJ1BsZWFzZSBwcm92aWRlIGEgdmFsaWQgZW1haWwnO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2FjdGl2YXRlU3VibWl0QnRuKGlucHV0RWwpO1xyXG4gIH1cclxuXHJcbiAgX2FjdGl2YXRlU3VibWl0QnRuKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGZvcm1FbCA9IGlucHV0RWwuY2xvc2VzdCgnLmZvcm0nKTtcclxuICAgIGNvbnN0IGJ0bkVsbSA9IGlucHV0RWxcclxuICAgICAgPy5jbG9zZXN0KCcuZm9ybScpXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuYnRuLXN1Ym1pdCcpO1xyXG5cclxuICAgIGNvbnN0IFtwYXNzd29yZCwgcGFzc3dvcmRDb25maXJtXSA9IGlucHV0RWxcclxuICAgICAgLmNsb3Nlc3QoJy5mb3JtJylcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYXNzd29yZCcpO1xyXG5cclxuICAgIC8vU0lHTlVQXHJcbiAgICBpZiAoZm9ybUVsLmNsYXNzTGlzdC5jb250YWlucygnc2lnbnVwLWZvcm0nKSkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgcGFzc3dvcmQuY2hlY2tWYWxpZGl0eSgpICYmXHJcbiAgICAgICAgcGFzc3dvcmRDb25maXJtLmNoZWNrVmFsaWRpdHkoKSAmJlxyXG4gICAgICAgIGlucHV0RWwuY2hlY2tWYWxpZGl0eSgpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybiBidG5FbG0/LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGUtYnRuJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGJ0bkVsbT8uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZS1idG4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vU0lHTklOXHJcbiAgICBpZiAoZm9ybUVsLmNsYXNzTGlzdC5jb250YWlucygnc2lnbmluLWZvcm0nKSkge1xyXG4gICAgICBpZiAocGFzc3dvcmQuY2hlY2tWYWxpZGl0eSgpICYmIGlucHV0RWwuY2hlY2tWYWxpZGl0eSgpKVxyXG4gICAgICAgIHJldHVybiBidG5FbG0/LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGUtYnRuJyk7XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBidG5FbG0/LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGUtYnRuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL0ZPUkdPVCBQQVNTV09SRFxyXG4gICAgaWYgKGZvcm1FbC5jbG9zZXN0KCcucGFzc3dvcmQtZm9yZ290LWZvcm0nKSkge1xyXG4gICAgICBpZiAoIWlucHV0RWwuY2hlY2tWYWxpZGl0eSgpKVxyXG4gICAgICAgIHJldHVybiBidG5FbG0/LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGUtYnRuJyk7XHJcbiAgICAgIGVsc2UgcmV0dXJuIGJ0bkVsbT8uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZS1idG4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvL0NPTkZJUk0gUkVTRVQgQ09ERVxyXG4gICAgaWYgKGZvcm1FbC5jbG9zZXN0KCcucGFzc3dvcmQtY29uZmlybS1mb3JtJykpIHtcclxuICAgICAgaW5wdXRFbC52YWx1ZSA9IGlucHV0RWwudmFsdWUuc2xpY2UoMCwgNik7XHJcbiAgICAgIGlmIChpbnB1dEVsLnZhbHVlLmxlbmd0aCA8PSA2KVxyXG4gICAgICAgIGJ0bkVsbT8uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZS1idG4nKTtcclxuICAgICAgaWYgKGlucHV0RWwudmFsdWUubGVuZ3RoID49IDYpXHJcbiAgICAgICAgYnRuRWxtPy5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlLWJ0bicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vUkVTRVQgUEFTU1dPUkRcclxuICAgIGlmIChmb3JtRWwuY2xvc2VzdCgnLnBhc3N3b3JkLXJlc2V0LWZvcm0nKSkge1xyXG4gICAgICBpZiAocGFzc3dvcmQuY2hlY2tWYWxpZGl0eSgpICYmIHBhc3N3b3JkQ29uZmlybS5jaGVja1ZhbGlkaXR5KCkpXHJcbiAgICAgICAgYnRuRWxtPy5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlLWJ0bicpO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIXBhc3N3b3JkLmNoZWNrVmFsaWRpdHkoKSB8fFxyXG4gICAgICAgICFwYXNzd29yZENvbmZpcm0uY2hlY2tWYWxpZGl0eSgpXHJcbiAgICAgIClcclxuICAgICAgICBidG5FbG0/LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGUtYnRuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgZm9ybUVsKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgdGhpcy5hcHAucXVlcnlTZWxlY3RvcignLmZvcm0nKSB8fFxyXG4gICAgICB0aGlzLmFwcC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZ3MtZm9ybScpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGxvYWRlclBhcmVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLmZvcm1FbC5xdWVyeVNlbGVjdG9yKCcuYnRuLXN1Ym1pdCcpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IEZvcm1WaWV3KCk7XHJcbiJdLCJuYW1lcyI6WyJub3R5ZiIsImR1cmF0aW9uIiwicG9zaXRpb24iLCJ4IiwieSIsInBhdXNlIiwiYXN5bmMiLCJ0aW1lb3V0IiwiUHJvbWlzZSIsInJlcyIsIl8iLCJzZXRUaW1lb3V0IiwiY29udHJvbEZvcm1TdWJtaXQiLCJ0YXJnZXQiLCJjb25zb2xlIiwibG9nIiwiY2xvc2VzdCIsImZvcm1EYXRhIiwic3VibWl0Rm9ybSIsInJlbmRlclNwaW5uZXIiLCJjbG9zZVNwaW5uZXIiLCJzdWNjZXNzIiwibG9jYXRpb24iLCJyZXBsYWNlIiwiZXJyIiwiZXJyb3IiLCJtZXNzYWdlIiwic2lnbnVwIiwic2lnbmluIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImVtYWlsIiwiZm9yZ290UGFzc3dvcmQiLCJudW1iZXIiLCJjb25maXJtQ29kZSIsInJlbW92ZUl0ZW0iLCJyZXNldFBhc3N3b3JkIiwiaGlkZURpYWxvZ3VlIiwicmVuZGVyTmV3U3ViIiwic3RhdGUiLCJzdWJzY3JpcHRpb25zIiwibmV3U3ViIiwidXBkYXRlRGFzaGJvYXJkIiwiY3JlYXRlTmV3U3ViIiwicmVuZGVyTmV3Q2F0ZWdvcnkiLCJjYXRlZ29yeSIsImNyZWF0ZU5ld0NhdCIsImNvbnRyb2xEYXRhU3VibWl0Iiwic3ViSWQiLCJkYXRhc2V0IiwiaWQiLCJjYXRlZ29yeUlkIiwiYWRkU3ViVG9DYXRlZ29yeSIsImNvbnRyb2xGb3JtSW5wdXQiLCJ2YWxpZGF0ZUlucHV0UGFzc3dvcmQiLCJ2YWxpZGF0ZUlucHV0Q29kZSIsImNvbnRyb2xGb3JtRm9jdXNPdXQiLCJ2YWxpZGF0ZUlucHV0RW1haWwiLCJjb250cm9sQXV0aENsaWNrIiwiaXNJbml0U2lnbm91dCIsInJlbmRlckNvbmZpcm0iLCJjb25maXJtU2lnbm91dCIsInJlbG9hZCIsInNpZ25vdXQiLCJGb3JtVmlldyIsInRoaXMiLCJmb3JtRWwiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsIkZvcm1EYXRhIiwiaW5wdXRFbCIsInZhbGlkYXRpb25Nc2dFbCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsYm9yZGVyQ29sb3IiLCJ0ZXh0Q29udGVudCIsInZhbHVlIiwidHJpbSIsImNoZWNrVmFsaWRpdHkiLCJfYWN0aXZhdGVTdWJtaXRCdG4iLCJidG5FbG0iLCJwYXNzd29yZCIsInBhc3N3b3JkQ29uZmlybSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsImFkZCIsInNsaWNlIiwibGVuZ3RoIiwiYXBwIiwibG9hZGVyUGFyZW50Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=