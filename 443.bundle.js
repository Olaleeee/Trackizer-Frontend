"use strict";(self.webpackChunktrackizer=self.webpackChunktrackizer||[]).push([[443],{106:(t,a,e)=>{e.d(a,{$5:()=>i,BD:()=>d,Nj:()=>m,P1:()=>w,Pm:()=>n,S6:()=>r,Uc:()=>y,deleteSub:()=>g,getCats:()=>q,getDBSubOverview:()=>b,getSubDetails:()=>O,getSubs:()=>f,hZ:()=>p,jp:()=>u,state:()=>o,updateSub:()=>h,updateUserSettings:()=>T,xw:()=>l});var s=e(190);const o={pageRoutes:["/","/welcome","/profile","/auth/signin","/auth/signup","/auth/forgot-password","/auth/confirm-password","/auth/reset-password"],sectionRoutes:["/dashboard","/budget","/calender","/card"],publicRoutes:["/auth/signup","/","/auth/signin","/welcome","/auth/forgot-password","/auth/confirm-password","/auth/reset-password"],app:{isFirstLoad:!0},page:{},section:{isParentCreated:!1},currentRoute:"",visitedRoutes:[],reqOptions:{},subscriptions:{},budget:{}},i=(0,s.V)(async function(t){o.reqOptions={formData:t};const a=await(0,s.d)("/auth","/signup",o.reqOptions),{data:e}=await a;o.user=e.user,o.accessToken=e.accessToken}),n=(0,s.V)(async function(t){o.reqOptions={formData:t,credentials:"include"};const a=await(0,s.d)("/auth","/signin",o.reqOptions),{data:e}=await a;o.user=e.user,o.accessToken=e.accessToken}),r=(0,s.V)(async function(){o.reqOptions={authorization:`Bearer ${o.accessToken}`,credentials:"include"},await(0,s.d)("/auth","/signout",o.reqOptions)}),c=(0,s.V)(async function(){o.reqOptions={credentials:"include"};const t=await(0,s.d)("/auth","/refresh",o.reqOptions),{data:a}=await t;o.accessToken=a.accessToken}),u=(0,s.V)(async function(){o.accessToken||await c(),o.reqOptions={authorization:`Bearer ${o.accessToken}`,method:"GET"};const t=await(0,s.d)("/auth","/me",o.reqOptions),{data:a}=await t;o.user=a.user,console.log(o.user)}),d=(0,s.V)(async function(t){o.reqOptions={formData:t};const a=await(0,s.d)("/auth","/forgot-password",o.reqOptions),{data:e}=await a;o.passwordResetCode=e.passwordResetCode,alert("demo only!: use this code: "+o.passwordResetCode)}),p=(0,s.V)(async function(t){o.reqOptions={formData:{email:localStorage.getItem("email")}};const a=await(0,s.d)("/auth",`/confirm-reset-code/${t}`,o.reqOptions),{message:e}=await a}),l=(0,s.V)(async function(t){o.reqOptions={formData:{...t,email:localStorage.getItem("email")}};const a=await(0,s.d)("/auth","/reset-password",o.reqOptions),{message:e}=await a;alert(e)}),w=(0,s.V)(async function(t){o.reqOptions={formData:t,authorization:`Bearer ${o.accessToken}`};const a=await(0,s.d)("/subscriptions","/",o.reqOptions),{data:e}=await a.data;o.subscriptions.newSub=e}),h=(0,s.V)(async function(t,a=!0){o.reqOptions={method:"PATCH",authorization:`Bearer ${o.accessToken}`,formData:{isBilled:a}},console.log(t);const e=await(0,s.d)("/subscriptions",`/${t}`,o.reqOptions),{data:i}=await e.data;o.subscriptions.subDetails=i}),g=(0,s.V)(async function(t){o.reqOptions={method:"DELETE",authorization:`Bearer ${o.accessToken}`},console.log(t),await(0,s.d)("/subscriptions",`/${t}`,o.reqOptions)}),f=(0,s.V)(async function(){o.reqOptions={method:"GET",authorization:`Bearer ${o.accessToken}`};const t=await(0,s.d)("/subscriptions","/",o.reqOptions),{data:a}=await t.data;o.subscriptions.allSubs=a,o.subscriptions.nextBillingDates=a.map(t=>t.nextBillingDate)}),b=(0,s.V)(async function(){o.reqOptions={method:"GET",authorization:`Bearer ${o.accessToken}`};const t=await(0,s.d)("/subscriptions","/overview",o.reqOptions),{data:a}=await t.data;o.subscriptions.DBSubOverview=a[0]}),O=(0,s.V)(async function(t){o.reqOptions={method:"GET",authorization:`Bearer ${o.accessToken}`};const a=await(0,s.d)("/subscriptions",`/${t}`,o.reqOptions),{data:e}=await a.data;o.subscriptions.subDetails=e}),m=(0,s.V)(async function(t){o.reqOptions={formData:t,authorization:`Bearer ${o.accessToken}`};const a=await(0,s.d)("/categories","/",o.reqOptions),{data:e}=await a.data;o.subscriptions.category=e}),q=(0,s.V)(async function(){o.reqOptions={method:"GET",authorization:`Bearer ${o.accessToken}`};const t=await(0,s.d)("/categories","/",o.reqOptions),{data:a}=await t.data;o.subscriptions.category=a}),y=((0,s.V)(async function(t,a){o.reqOptions={method:"PATCH",authorization:`Bearer ${o.accessToken}`,formData:a};const e=await(0,s.d)("/categories",`/${t}`,o.reqOptions),{data:i}=await e.data;o.user=i}),(0,s.V)(async function(t){o.reqOptions={method:"PATCH",authorization:`Bearer ${o.accessToken}`};const[a,e]=t;console.log(t,a,e);const i=await(0,s.d)("/categories",`/${a}/new-sub/${e}`,o.reqOptions),{data:n}=await i.data;o.user=n})),T=(0,s.V)(async function(t){o.reqOptions={method:"PATCH",authorization:`Bearer ${o.accessToken}`,formData:t};const a=await(0,s.d)("/users","/updateSettings",o.reqOptions),{data:e}=await a.data;o.user=e})},190:(t,a,e)=>{e.d(a,{V:()=>n,checkRouteAccess:()=>c,checkUpdateState:()=>i,d:()=>r,getUpcomgingBill:()=>u,updateDashboard:()=>d});var s=e(106),o=e(509);const i=function(t,a){history.pushState(a,"",t),t.includes("forgot")&&history.replaceState(a,"",t)},n=function(t){return a=>t(a||void 0).catch(t=>{throw console.log(t),t})},r=async function(t,a,s){try{const{BASE_PATH:o,API_VERSION:i}=await e.e(373).then(e.bind(e,373)),n=await fetch(`https://trackizer-backend.onrender.com${o}${i}${t}${a}`,{method:s?.method||"POST",headers:{"Content-Type":"application/json",authorization:s?.authorization||void 0},body:s?.formData?JSON.stringify(s?.formData):void 0,credentials:"include"});if(console.log(n),504==n.status)throw{status:"NetErr",message:"Network error"};if(404===n.status)throw{status:n.status,message:n.statusText};if(!n.ok){let t=await n.json();throw t.statusCode=n.status,t}return await n.json()}catch(t){throw console.log(t),t}},c=async(t,a)=>{if(!t.publicRoutes.includes(a)&&!t.user)try{if(await s.jp(),!t.user)return history.replaceState({},"","auth/signin"),location.reload()}catch(t){if(401===t.statusCode)return setTimeout(()=>{location.replace("/auth/signin")},3e3),o.A.renderError(t,{},!0);if("NetErr"===t.status)return history.replaceState({},"","auth/signin"),location.reload();o.A.renderError(t,{action:"Reload"})}},u=async t=>t.filter(t=>new Date(t.nextBillingDate).getMonth()===(new Date).getMonth()&&new Date(t.nextBillingDate).getFullYear()===(new Date).getFullYear()),d=async()=>{const{default:t}=await e.e(682).then(e.bind(e,682));await s.getSubs(),t.updateSub(s.state.subscriptions.allSubs);const a=await u(s.state.subscriptions.allSubs);console.log(a),t.updateBills(a),await s.getDBSubOverview(),t.updateOverview(s.state.subscriptions?.DBSubOverview)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Iiwid2VicGFjazovL3RyYWNraXplci8uL3B1YmxpYy9zY3JpcHQvaGVscGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBSkFYLCBjYXRjaFRocm93RXJyIH0gZnJvbSAnLi9oZWxwZXJzJztcclxuXHJcbmV4cG9ydCBjb25zdCBzdGF0ZSA9IHtcclxuICBwYWdlUm91dGVzOiBbXHJcbiAgICAnLycsXHJcbiAgICAnL3dlbGNvbWUnLFxyXG4gICAgJy9wcm9maWxlJyxcclxuICAgICcvYXV0aC9zaWduaW4nLFxyXG4gICAgJy9hdXRoL3NpZ251cCcsXHJcbiAgICAnL2F1dGgvZm9yZ290LXBhc3N3b3JkJyxcclxuICAgICcvYXV0aC9jb25maXJtLXBhc3N3b3JkJyxcclxuICAgICcvYXV0aC9yZXNldC1wYXNzd29yZCcsXHJcbiAgXSxcclxuICBzZWN0aW9uUm91dGVzOiBbJy9kYXNoYm9hcmQnLCAnL2J1ZGdldCcsICcvY2FsZW5kZXInLCAnL2NhcmQnXSxcclxuICBwdWJsaWNSb3V0ZXM6IFtcclxuICAgICcvYXV0aC9zaWdudXAnLFxyXG4gICAgJy8nLFxyXG4gICAgJy9hdXRoL3NpZ25pbicsXHJcbiAgICAnL3dlbGNvbWUnLFxyXG4gICAgJy9hdXRoL2ZvcmdvdC1wYXNzd29yZCcsXHJcbiAgICAnL2F1dGgvY29uZmlybS1wYXNzd29yZCcsXHJcbiAgICAnL2F1dGgvcmVzZXQtcGFzc3dvcmQnLFxyXG4gIF0sXHJcbiAgYXBwOiB7XHJcbiAgICBpc0ZpcnN0TG9hZDogdHJ1ZSxcclxuICB9LFxyXG4gIHBhZ2U6IHt9LFxyXG4gIHNlY3Rpb246IHtcclxuICAgIGlzUGFyZW50Q3JlYXRlZDogZmFsc2UsXHJcbiAgfSxcclxuICBjdXJyZW50Um91dGU6ICcnLFxyXG4gIHZpc2l0ZWRSb3V0ZXM6IFtdLFxyXG4gIHJlcU9wdGlvbnM6IHt9LFxyXG4gIHN1YnNjcmlwdGlvbnM6IHt9LFxyXG4gIGJ1ZGdldDoge30sXHJcbn07XHJcblxyXG4vL0NyZWF0ZSBOZXcgVXNlciBBY2NvdW50XHJcbmV4cG9ydCBjb25zdCBzaWdudXAgPSBjYXRjaFRocm93RXJyKGFzeW5jIGZ1bmN0aW9uIChmb3JtRGF0YSkge1xyXG4gIHN0YXRlLnJlcU9wdGlvbnMgPSB7XHJcbiAgICBmb3JtRGF0YTogZm9ybURhdGEsXHJcbiAgICAvLyBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzQm9keSA9IGF3YWl0IEFKQVgoJy9hdXRoJywgJy9zaWdudXAnLCBzdGF0ZS5yZXFPcHRpb25zKTtcclxuXHJcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByZXNCb2R5O1xyXG5cclxuICAvL0dpdmUgQWNjZXNzIFRva2VuIHRvIHRoZSBuZXdseSBjcmVhdGVkIGFjY291bnRcclxuICBzdGF0ZS51c2VyID0gZGF0YS51c2VyO1xyXG4gIHN0YXRlLmFjY2Vzc1Rva2VuID0gZGF0YS5hY2Nlc3NUb2tlbjtcclxufSk7XHJcblxyXG4vL1NpZ24gVXNlciBJblxyXG5leHBvcnQgY29uc3Qgc2lnbmluID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoZm9ybURhdGEpIHtcclxuICBzdGF0ZS5yZXFPcHRpb25zID0ge1xyXG4gICAgZm9ybURhdGE6IGZvcm1EYXRhLFxyXG4gICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcclxuICB9O1xyXG4gIGNvbnN0IHJlc0JvZHkgPSBhd2FpdCBBSkFYKCcvYXV0aCcsICcvc2lnbmluJywgc3RhdGUucmVxT3B0aW9ucyk7XHJcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByZXNCb2R5O1xyXG5cclxuICAvL0dpdmUgQWNjZXNzIFRva2VuIHRvIHRoZSBjdXJyZW50bHkgbG9nZ2VkIGluIHVzZXJcclxuICBzdGF0ZS51c2VyID0gZGF0YS51c2VyO1xyXG4gIHN0YXRlLmFjY2Vzc1Rva2VuID0gZGF0YS5hY2Nlc3NUb2tlbjtcclxufSk7XHJcblxyXG4vL1NpZ24gdXNlciBvdXRcclxuZXhwb3J0IGNvbnN0IHNpZ25vdXQgPSBjYXRjaFRocm93RXJyKGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICBzdGF0ZS5yZXFPcHRpb25zID0ge1xyXG4gICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3N0YXRlLmFjY2Vzc1Rva2VufWAsXHJcbiAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxyXG4gIH07XHJcblxyXG4gIGF3YWl0IEFKQVgoJy9hdXRoJywgJy9zaWdub3V0Jywgc3RhdGUucmVxT3B0aW9ucyk7XHJcbn0pO1xyXG5cclxuLy9HZXQgQWNjZXNzIFRva2VuIHRoYXQgbGl2ZXMgaW4gbWVtb3J5IGFuZCBkaXNhcHBlYXJzIG9uIHBhZ2UgcmVsb2FkXHJcbmNvbnN0IGdldEFjY2Vzc1Rva2VuID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgc3RhdGUucmVxT3B0aW9ucyA9IHtcclxuICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzQm9keSA9IGF3YWl0IEFKQVgoJy9hdXRoJywgJy9yZWZyZXNoJywgc3RhdGUucmVxT3B0aW9ucyk7XHJcblxyXG4gIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcmVzQm9keTtcclxuICBzdGF0ZS5hY2Nlc3NUb2tlbiA9IGRhdGEuYWNjZXNzVG9rZW47XHJcbn0pO1xyXG5cclxuLy9nZXQgXCJzdGF0ZS51c2VyXCIgd2l0aCB0aGUgYWNjZXNzIFRva2VuLiBObyBBY2Nlc3MgVG9rZW4gbicgdXNlciBpcyBub3QgYWxsb3dlZCB0byBjb250aW51ZVxyXG5leHBvcnQgY29uc3QgZ2V0TWUgPSBjYXRjaFRocm93RXJyKGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICBpZiAoIXN0YXRlLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICBhd2FpdCBnZXRBY2Nlc3NUb2tlbigpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGUucmVxT3B0aW9ucyA9IHtcclxuICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzdGF0ZS5hY2Nlc3NUb2tlbn1gLFxyXG4gICAgbWV0aG9kOiAnR0VUJyxcclxuICB9O1xyXG5cclxuICBjb25zdCByZXNCb2R5ID0gYXdhaXQgQUpBWCgnL2F1dGgnLCAnL21lJywgc3RhdGUucmVxT3B0aW9ucyk7XHJcblxyXG4gIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcmVzQm9keTtcclxuICBzdGF0ZS51c2VyID0gZGF0YS51c2VyO1xyXG4gIGNvbnNvbGUubG9nKHN0YXRlLnVzZXIpO1xyXG59KTtcclxuXHJcbi8vU2VuZCB1c2VyIGVtYWlsIHRvIHNlcnZlciB0byBnZXQgdGhlIHBhc3N3b3JkIHJlc2V0IGNvZGVcclxuZXhwb3J0IGNvbnN0IGZvcmdvdFBhc3N3b3JkID0gY2F0Y2hUaHJvd0VycihcclxuICBhc3luYyBmdW5jdGlvbiAoZm9ybURhdGEpIHtcclxuICAgIHN0YXRlLnJlcU9wdGlvbnMgPSB7XHJcbiAgICAgIGZvcm1EYXRhLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc0JvZHkgPSBhd2FpdCBBSkFYKFxyXG4gICAgICAnL2F1dGgnLFxyXG4gICAgICAnL2ZvcmdvdC1wYXNzd29yZCcsXHJcbiAgICAgIHN0YXRlLnJlcU9wdGlvbnNcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByZXNCb2R5O1xyXG4gICAgc3RhdGUucGFzc3dvcmRSZXNldENvZGUgPSBkYXRhLnBhc3N3b3JkUmVzZXRDb2RlO1xyXG4gICAgYWxlcnQoJ2RlbW8gb25seSE6IHVzZSB0aGlzIGNvZGU6ICcgKyBzdGF0ZS5wYXNzd29yZFJlc2V0Q29kZSk7XHJcbiAgfVxyXG4pO1xyXG5cclxuLy9TRU5EIFBBU1NXT1JEIFJFU0VUIENPREUgRk9SIFZBTElEQVRJT04gT04gVEhFIFNFUlZFUlxyXG5leHBvcnQgY29uc3QgY29uZmlybVJlc2V0Q29kZSA9IGNhdGNoVGhyb3dFcnIoYXN5bmMgZnVuY3Rpb24gKGNvZGUpIHtcclxuICBzdGF0ZS5yZXFPcHRpb25zID0ge1xyXG4gICAgZm9ybURhdGE6IHsgZW1haWw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpIH0sXHJcbiAgfTtcclxuICBjb25zdCByZXNCb2R5ID0gYXdhaXQgQUpBWChcclxuICAgICcvYXV0aCcsXHJcbiAgICBgL2NvbmZpcm0tcmVzZXQtY29kZS8ke2NvZGV9YCxcclxuICAgIHN0YXRlLnJlcU9wdGlvbnNcclxuICApO1xyXG5cclxuICBjb25zdCB7IG1lc3NhZ2UgfSA9IGF3YWl0IHJlc0JvZHk7XHJcbn0pO1xyXG5cclxuLy9DT05GSVJNIFBBU1NXT1JEIFJFU1QgQ09ERSBBTkQgQ1JFQVRFIE5FVyBVU0VSIFBBU1NXT1JEXHJcbmV4cG9ydCBjb25zdCByZXNldFBhc3N3b3JkID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoZm9ybURhdGEpIHtcclxuICBzdGF0ZS5yZXFPcHRpb25zID0ge1xyXG4gICAgZm9ybURhdGE6IHsgLi4uZm9ybURhdGEsIGVtYWlsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKSB9LFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlc0JvZHkgPSBhd2FpdCBBSkFYKFxyXG4gICAgJy9hdXRoJyxcclxuICAgIGAvcmVzZXQtcGFzc3dvcmRgLFxyXG4gICAgc3RhdGUucmVxT3B0aW9uc1xyXG4gICk7XHJcblxyXG4gIGNvbnN0IHsgbWVzc2FnZSB9ID0gYXdhaXQgcmVzQm9keTtcclxuICBhbGVydChtZXNzYWdlKTtcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlU3ViID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoZm9ybURhdGEpIHtcclxuICBzdGF0ZS5yZXFPcHRpb25zID0ge1xyXG4gICAgZm9ybURhdGEsXHJcbiAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7c3RhdGUuYWNjZXNzVG9rZW59YCxcclxuICB9O1xyXG5cclxuICBjb25zdCByZXNCb2R5ID0gYXdhaXQgQUpBWCgnL3N1YnNjcmlwdGlvbnMnLCBgL2AsIHN0YXRlLnJlcU9wdGlvbnMpO1xyXG5cclxuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHJlc0JvZHkuZGF0YTtcclxuXHJcbiAgc3RhdGUuc3Vic2NyaXB0aW9ucy5uZXdTdWIgPSBkYXRhO1xyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVTdWIgPSBjYXRjaFRocm93RXJyKGFzeW5jIGZ1bmN0aW9uIChcclxuICBpZCxcclxuICBpc0JpbGxlZCA9IHRydWVcclxuKSB7XHJcbiAgc3RhdGUucmVxT3B0aW9ucyA9IHtcclxuICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzdGF0ZS5hY2Nlc3NUb2tlbn1gLFxyXG4gICAgZm9ybURhdGE6IHsgaXNCaWxsZWQgfSxcclxuICB9O1xyXG5cclxuICBjb25zb2xlLmxvZyhpZCk7XHJcbiAgY29uc3QgcmVzQm9keSA9IGF3YWl0IEFKQVgoXHJcbiAgICAnL3N1YnNjcmlwdGlvbnMnLFxyXG4gICAgYC8ke2lkfWAsXHJcbiAgICBzdGF0ZS5yZXFPcHRpb25zXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByZXNCb2R5LmRhdGE7XHJcbiAgc3RhdGUuc3Vic2NyaXB0aW9ucy5zdWJEZXRhaWxzID0gZGF0YTtcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlU3ViID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoaWQpIHtcclxuICBzdGF0ZS5yZXFPcHRpb25zID0ge1xyXG4gICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzdGF0ZS5hY2Nlc3NUb2tlbn1gLFxyXG4gIH07XHJcblxyXG4gIGNvbnNvbGUubG9nKGlkKTtcclxuICBjb25zdCByZXNCb2R5ID0gYXdhaXQgQUpBWChcclxuICAgICcvc3Vic2NyaXB0aW9ucycsXHJcbiAgICBgLyR7aWR9YCxcclxuICAgIHN0YXRlLnJlcU9wdGlvbnNcclxuICApO1xyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRTdWJzID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgc3RhdGUucmVxT3B0aW9ucyA9IHtcclxuICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7c3RhdGUuYWNjZXNzVG9rZW59YCxcclxuICB9O1xyXG5cclxuICBjb25zdCByZXNCb2R5ID0gYXdhaXQgQUpBWCgnL3N1YnNjcmlwdGlvbnMnLCBgL2AsIHN0YXRlLnJlcU9wdGlvbnMpO1xyXG4gIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcmVzQm9keS5kYXRhO1xyXG5cclxuICBzdGF0ZS5zdWJzY3JpcHRpb25zLmFsbFN1YnMgPSBkYXRhO1xyXG5cclxuICBzdGF0ZS5zdWJzY3JpcHRpb25zLm5leHRCaWxsaW5nRGF0ZXMgPSBkYXRhLm1hcChcclxuICAgIChzdWIpID0+IHN1Yi5uZXh0QmlsbGluZ0RhdGVcclxuICApO1xyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXREQlN1Yk92ZXJ2aWV3ID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgc3RhdGUucmVxT3B0aW9ucyA9IHtcclxuICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7c3RhdGUuYWNjZXNzVG9rZW59YCxcclxuICB9O1xyXG5cclxuICBjb25zdCByZXNCb2R5ID0gYXdhaXQgQUpBWChcclxuICAgICcvc3Vic2NyaXB0aW9ucycsXHJcbiAgICBgL292ZXJ2aWV3YCxcclxuICAgIHN0YXRlLnJlcU9wdGlvbnNcclxuICApO1xyXG5cclxuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHJlc0JvZHkuZGF0YTtcclxuICBzdGF0ZS5zdWJzY3JpcHRpb25zLkRCU3ViT3ZlcnZpZXcgPSBkYXRhWzBdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRTdWJEZXRhaWxzID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoaWQpIHtcclxuICBzdGF0ZS5yZXFPcHRpb25zID0ge1xyXG4gICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzdGF0ZS5hY2Nlc3NUb2tlbn1gLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlc0JvZHkgPSBhd2FpdCBBSkFYKFxyXG4gICAgJy9zdWJzY3JpcHRpb25zJyxcclxuICAgIGAvJHtpZH1gLFxyXG4gICAgc3RhdGUucmVxT3B0aW9uc1xyXG4gICk7XHJcblxyXG4gIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcmVzQm9keS5kYXRhO1xyXG4gIHN0YXRlLnN1YnNjcmlwdGlvbnMuc3ViRGV0YWlscyA9IGRhdGE7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNhdCA9IGNhdGNoVGhyb3dFcnIoYXN5bmMgZnVuY3Rpb24gKGZvcm1EYXRhKSB7XHJcbiAgc3RhdGUucmVxT3B0aW9ucyA9IHtcclxuICAgIGZvcm1EYXRhLFxyXG4gICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3N0YXRlLmFjY2Vzc1Rva2VufWAsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzQm9keSA9IGF3YWl0IEFKQVgoJy9jYXRlZ29yaWVzJywgYC9gLCBzdGF0ZS5yZXFPcHRpb25zKTtcclxuXHJcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByZXNCb2R5LmRhdGE7XHJcblxyXG4gIHN0YXRlLnN1YnNjcmlwdGlvbnMuY2F0ZWdvcnkgPSBkYXRhO1xyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRDYXRzID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgc3RhdGUucmVxT3B0aW9ucyA9IHtcclxuICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7c3RhdGUuYWNjZXNzVG9rZW59YCxcclxuICB9O1xyXG5cclxuICBjb25zdCByZXNCb2R5ID0gYXdhaXQgQUpBWCgnL2NhdGVnb3JpZXMnLCBgL2AsIHN0YXRlLnJlcU9wdGlvbnMpO1xyXG5cclxuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHJlc0JvZHkuZGF0YTtcclxuXHJcbiAgc3RhdGUuc3Vic2NyaXB0aW9ucy5jYXRlZ29yeSA9IGRhdGE7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUNhdGVnb3J5ID0gY2F0Y2hUaHJvd0VycihcclxuICBhc3luYyBmdW5jdGlvbiAoaWQsIGZvcm1EYXRhKSB7XHJcbiAgICBzdGF0ZS5yZXFPcHRpb25zID0ge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzdGF0ZS5hY2Nlc3NUb2tlbn1gLFxyXG4gICAgICBmb3JtRGF0YSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVzQm9keSA9IGF3YWl0IEFKQVgoXHJcbiAgICAgICcvY2F0ZWdvcmllcycsXHJcbiAgICAgIGAvJHtpZH1gLFxyXG4gICAgICBzdGF0ZS5yZXFPcHRpb25zXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcmVzQm9keS5kYXRhO1xyXG4gICAgc3RhdGUudXNlciA9IGRhdGE7XHJcbiAgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZFN1YkNhdGVnb3J5ID0gY2F0Y2hUaHJvd0Vycihhc3luYyBmdW5jdGlvbiAoaWRzKSB7XHJcbiAgc3RhdGUucmVxT3B0aW9ucyA9IHtcclxuICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzdGF0ZS5hY2Nlc3NUb2tlbn1gLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IFtpZCwgc3ViSWRdID0gaWRzO1xyXG4gIGNvbnNvbGUubG9nKGlkcywgaWQsIHN1YklkKTtcclxuICBjb25zdCByZXNCb2R5ID0gYXdhaXQgQUpBWChcclxuICAgICcvY2F0ZWdvcmllcycsXHJcbiAgICBgLyR7aWR9L25ldy1zdWIvJHtzdWJJZH1gLFxyXG4gICAgc3RhdGUucmVxT3B0aW9uc1xyXG4gICk7XHJcblxyXG4gIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcmVzQm9keS5kYXRhO1xyXG4gIHN0YXRlLnVzZXIgPSBkYXRhO1xyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVVc2VyU2V0dGluZ3MgPSBjYXRjaFRocm93RXJyKFxyXG4gIGFzeW5jIGZ1bmN0aW9uIChmb3JtRGF0YSkge1xyXG4gICAgc3RhdGUucmVxT3B0aW9ucyA9IHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7c3RhdGUuYWNjZXNzVG9rZW59YCxcclxuICAgICAgZm9ybURhdGEsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJlc0JvZHkgPSBhd2FpdCBBSkFYKFxyXG4gICAgICAnL3VzZXJzJyxcclxuICAgICAgYC91cGRhdGVTZXR0aW5nc2AsXHJcbiAgICAgIHN0YXRlLnJlcU9wdGlvbnNcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByZXNCb2R5LmRhdGE7XHJcbiAgICBzdGF0ZS51c2VyID0gZGF0YTtcclxuICB9XHJcbik7XHJcbiIsImltcG9ydCAqIGFzIG1vZGVsIGZyb20gJy4vbW9kZWwnO1xyXG5pbXBvcnQgZXJyb3JWaWV3IGZyb20gJy4vdmlld3MvZGlhbG9ndWVzL2Vycm9yVmlldyc7XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tVcGRhdGVTdGF0ZSA9IGZ1bmN0aW9uIChyb3V0ZSwgc3RhdGUpIHtcclxuICBoaXN0b3J5LnB1c2hTdGF0ZShzdGF0ZSwgJycsIHJvdXRlKTtcclxuICBpZiAocm91dGUuaW5jbHVkZXMoJ2ZvcmdvdCcpKVxyXG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoc3RhdGUsICcnLCByb3V0ZSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY2F0Y2hUaHJvd0VyciA9IGZ1bmN0aW9uIChmbikge1xyXG4gIHJldHVybiAocGFyYW1zKSA9PlxyXG4gICAgZm4ocGFyYW1zIHx8IHVuZGVmaW5lZCkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB0aHJvdyBlcnI7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBBSkFYID0gYXN5bmMgZnVuY3Rpb24gKHJlc291cmNlLCBlbmRwb2ludCwgb3B0aW9ucykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IEJBU0VfUEFUSCwgQVBJX1ZFUlNJT04gfSA9IGF3YWl0IGltcG9ydCgnLi9jb25maWcnKTtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxyXG4gICAgICBgaHR0cHM6Ly90cmFja2l6ZXItYmFja2VuZC5vbnJlbmRlci5jb20ke0JBU0VfUEFUSH0ke0FQSV9WRVJTSU9OfSR7cmVzb3VyY2V9JHtlbmRwb2ludH1gLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiBvcHRpb25zPy5tZXRob2QgfHwgJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBvcHRpb25zPy5hdXRob3JpemF0aW9uIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IG9wdGlvbnM/LmZvcm1EYXRhXHJcbiAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KG9wdGlvbnM/LmZvcm1EYXRhKVxyXG4gICAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcblxyXG4gICAgaWYgKHJlcy5zdGF0dXMgPT0gNTA0KSB7XHJcbiAgICAgIGNvbnN0IGVyciA9IHtcclxuICAgICAgICBzdGF0dXM6ICdOZXRFcnInLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdOZXR3b3JrIGVycm9yJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRocm93IGVycjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDA0KSB7XHJcbiAgICAgIGNvbnN0IGVyciA9IHtcclxuICAgICAgICBzdGF0dXM6IHJlcy5zdGF0dXMsXHJcbiAgICAgICAgbWVzc2FnZTogcmVzLnN0YXR1c1RleHQsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aHJvdyBlcnI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgKHJlcy5zdGF0dXNUZXh0XHJcbiAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICBsZXQgZXJyID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgZXJyLnN0YXR1c0NvZGUgPSByZXMuc3RhdHVzO1xyXG4gICAgICB0aHJvdyBlcnI7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB0aHJvdyBlcnI7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoZWNrUm91dGVBY2Nlc3MgPSBhc3luYyAoc3RhdGUsIHJvdXRlKSA9PiB7XHJcbiAgaWYgKCFzdGF0ZS5wdWJsaWNSb3V0ZXMuaW5jbHVkZXMocm91dGUpICYmICFzdGF0ZS51c2VyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBtb2RlbC5nZXRNZSgpO1xyXG5cclxuICAgICAgaWYgKCFzdGF0ZS51c2VyKSB7XHJcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICcnLCAnYXV0aC9zaWduaW4nKTtcclxuICAgICAgICByZXR1cm4gbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBpZiAoZXJyLnN0YXR1c0NvZGUgPT09IDQwMSkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgbG9jYXRpb24ucmVwbGFjZSgnL2F1dGgvc2lnbmluJyk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcblxyXG4gICAgICAgIHJldHVybiBlcnJvclZpZXcucmVuZGVyRXJyb3IoZXJyLCB7fSwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChlcnIuc3RhdHVzID09PSAnTmV0RXJyJykge1xyXG4gICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAnJywgJ2F1dGgvc2lnbmluJyk7XHJcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBlcnJvclZpZXcucmVuZGVyRXJyb3IoZXJyLCB7IGFjdGlvbjogJ1JlbG9hZCcgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFVwY29tZ2luZ0JpbGwgPSBhc3luYyAoc3VicykgPT4ge1xyXG4gIHJldHVybiBzdWJzLmZpbHRlcihcclxuICAgIChzdWIpID0+XHJcbiAgICAgIG5ldyBEYXRlKHN1Yi5uZXh0QmlsbGluZ0RhdGUpLmdldE1vbnRoKCkgPT09XHJcbiAgICAgICAgbmV3IERhdGUoKS5nZXRNb250aCgpICYmXHJcbiAgICAgIG5ldyBEYXRlKHN1Yi5uZXh0QmlsbGluZ0RhdGUpLmdldEZ1bGxZZWFyKCkgPT09XHJcbiAgICAgICAgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpXHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVEYXNoYm9hcmQgPSBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgeyBkZWZhdWx0OiBkYXNoYm9hcmRWaWV3IH0gPVxyXG4gICAgYXdhaXQgaW1wb3J0KCcuL3ZpZXdzL3NlY3Rpb25zL2Rhc2hib2FyZFZpZXcnKTtcclxuXHJcbiAgLy9yZXNldHMgc3Vic2NyaXB0aW9ucyB0byBnZXQgbmV3IGRhdGEgZnJvbSB0aGUgZGJcclxuICAvLyBtb2RlbC5zdGF0ZS5zdWJzY3JpcHRpb25zLmFsbFN1YnMgPSB1bmRlZmluZWQ7XHJcbiAgLy8gbW9kZWwuc3RhdGUuc3Vic2NyaXB0aW9ucy5EQlN1Yk92ZXJ2aWV3ID0gdW5kZWZpbmVkO1xyXG5cclxuICAvL2dldCB1cGRhdGVkIHN1YnNjcmlwdGlvbnNcclxuICBhd2FpdCBtb2RlbC5nZXRTdWJzKCk7XHJcbiAgZGFzaGJvYXJkVmlldy51cGRhdGVTdWIobW9kZWwuc3RhdGUuc3Vic2NyaXB0aW9ucy5hbGxTdWJzKTtcclxuICBjb25zdCBiaWxscyA9IGF3YWl0IGdldFVwY29tZ2luZ0JpbGwoXHJcbiAgICBtb2RlbC5zdGF0ZS5zdWJzY3JpcHRpb25zLmFsbFN1YnNcclxuICApO1xyXG4gIGNvbnNvbGUubG9nKGJpbGxzKTtcclxuICBkYXNoYm9hcmRWaWV3LnVwZGF0ZUJpbGxzKGJpbGxzKTtcclxuXHJcbiAgLy9nZXQgdXBkYXRlZCBzdWJzIG92ZXJ2aWV3XHJcbiAgYXdhaXQgbW9kZWwuZ2V0REJTdWJPdmVydmlldygpO1xyXG4gIGRhc2hib2FyZFZpZXcudXBkYXRlT3ZlcnZpZXcoXHJcbiAgICBtb2RlbC5zdGF0ZS5zdWJzY3JpcHRpb25zPy5EQlN1Yk92ZXJ2aWV3XHJcbiAgKTtcclxufTtcclxuIl0sIm5hbWVzIjpbInN0YXRlIiwicGFnZVJvdXRlcyIsInNlY3Rpb25Sb3V0ZXMiLCJwdWJsaWNSb3V0ZXMiLCJhcHAiLCJpc0ZpcnN0TG9hZCIsInBhZ2UiLCJzZWN0aW9uIiwiaXNQYXJlbnRDcmVhdGVkIiwiY3VycmVudFJvdXRlIiwidmlzaXRlZFJvdXRlcyIsInJlcU9wdGlvbnMiLCJzdWJzY3JpcHRpb25zIiwiYnVkZ2V0Iiwic2lnbnVwIiwiYXN5bmMiLCJmb3JtRGF0YSIsInJlc0JvZHkiLCJkYXRhIiwidXNlciIsImFjY2Vzc1Rva2VuIiwic2lnbmluIiwiY3JlZGVudGlhbHMiLCJzaWdub3V0IiwiYXV0aG9yaXphdGlvbiIsImdldEFjY2Vzc1Rva2VuIiwiZ2V0TWUiLCJtZXRob2QiLCJjb25zb2xlIiwibG9nIiwiZm9yZ290UGFzc3dvcmQiLCJwYXNzd29yZFJlc2V0Q29kZSIsImFsZXJ0IiwiY29uZmlybVJlc2V0Q29kZSIsImNvZGUiLCJlbWFpbCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJtZXNzYWdlIiwicmVzZXRQYXNzd29yZCIsImNyZWF0ZVN1YiIsIm5ld1N1YiIsInVwZGF0ZVN1YiIsImlkIiwiaXNCaWxsZWQiLCJzdWJEZXRhaWxzIiwiZGVsZXRlU3ViIiwiZ2V0U3VicyIsImFsbFN1YnMiLCJuZXh0QmlsbGluZ0RhdGVzIiwibWFwIiwic3ViIiwibmV4dEJpbGxpbmdEYXRlIiwiZ2V0REJTdWJPdmVydmlldyIsIkRCU3ViT3ZlcnZpZXciLCJnZXRTdWJEZXRhaWxzIiwiY3JlYXRlQ2F0IiwiY2F0ZWdvcnkiLCJnZXRDYXRzIiwiYWRkU3ViQ2F0ZWdvcnkiLCJpZHMiLCJzdWJJZCIsInVwZGF0ZVVzZXJTZXR0aW5ncyIsImNoZWNrVXBkYXRlU3RhdGUiLCJyb3V0ZSIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJpbmNsdWRlcyIsInJlcGxhY2VTdGF0ZSIsImNhdGNoVGhyb3dFcnIiLCJmbiIsInBhcmFtcyIsInVuZGVmaW5lZCIsImNhdGNoIiwiZXJyIiwiQUpBWCIsInJlc291cmNlIiwiZW5kcG9pbnQiLCJvcHRpb25zIiwiQkFTRV9QQVRIIiwiQVBJX1ZFUlNJT04iLCJyZXMiLCJmZXRjaCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJvayIsImpzb24iLCJzdGF0dXNDb2RlIiwiY2hlY2tSb3V0ZUFjY2VzcyIsImxvY2F0aW9uIiwicmVsb2FkIiwic2V0VGltZW91dCIsInJlcGxhY2UiLCJyZW5kZXJFcnJvciIsImFjdGlvbiIsImdldFVwY29tZ2luZ0JpbGwiLCJzdWJzIiwiZmlsdGVyIiwiRGF0ZSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJ1cGRhdGVEYXNoYm9hcmQiLCJkZWZhdWx0IiwiZGFzaGJvYXJkVmlldyIsImJpbGxzIiwidXBkYXRlQmlsbHMiLCJ1cGRhdGVPdmVydmlldyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9